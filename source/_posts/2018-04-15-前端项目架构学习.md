---
title: 前端项目架构学习
date: 2018-04-15 11:23:34
tags: 前端架构
categories: 思想
---

好的前端工程师和架构师一定是对数据非常敏感的，通过数据可以为用户提供更好的体验。

### 好的目录组织是一个好的架构的开始。每个目录要做什么事情一定要让它职责分明。

### 除了目录组织的架构之外还有页面组织的架构。

views中存放的都是视图代码，views中除了放一些页面之外，还可以将页面都共有的部分放到views/includes文件夹中，然后在其他页面中引入这些视图文件。视图页面一般不会有太复杂的逻辑关系，基本只有包含与被包含的关系，因此include中只需要平行摆放这些组件即可。当然，如果你的项目十分庞大，比如一个登录模块就有几十种，那么可以再使用文件夹来区分他们。

### 更高级一些的架构设计则包含了组件化和设计模式。这方面主要针对js代码，因为html和css的逻辑性并不是很强。

Js中的继承和Extend是Js抽象的基础，因为js不像其他面向对象语言一样与生俱来这些功能。
* Extend比如浅拷贝（适用于基本数据类型），深拷贝（使用于引用数据类型）。浅拷贝与深拷贝其实就是一个抽象出来的extend函数，使子元素具有父元素的属性。对于基本数据类型来说，就是循环复制父元素中的元素。
* js中的继承，一特有的方式就是原型链继承。

### 划分命名空间，前端模块拆分的最基本的形式可以认为是**闭包**的一种应用，但是这种方式对于命名空间的管理过于随意。闭包有一个问题就是在闭包内声明的变量会常驻在内存中，因此要避免在闭包内声明过于大的变量。

其实在实际项目中不会大规模的使用js的继承和扩展，一是因为项目逻辑一般不会那么复杂，二是因为一些类库为我们提供了便利，比如jQuery就提供了一个封装好的extend方法。

常用的是组件化，比如一个弹出窗口可以做成一个组件。我们可以使用开源框架来完成最终的组件的组织和管理，例如requirejs/seajs，这两个框架遵循了两种规范，一个是cmd规范，一个是amd规范，cmd指明模块是按需加载的，即依赖就近；amd则是依赖关系前置，即使用一个依赖于a,b,c三个模块的组件时，如果使用这个组件会先加载这三个模块，不管这三个模块在组件初始化的过程中用没用到。

模块化框架基本只用到两个方法，一个是define，也就是定义一个模块；一个是require，也就是使用一个模块。

### 前端工程师拿到交互图时应该已经能大致想到整个网站的架子是什么样的，一定要统观全局

一定要考虑有哪些部分是公用的，考虑一下如何抽象出来，也就是组件化开发。

### 当设计图出炉后，应该考虑到api的对接，虽然不能做到百分百精确，但要有一个大概的规划

要明确哪部分是静态的，哪部分是动态的，并与后台负责人员进行讨论。

### 通常来讲首页的性能会影响到用户的留存率，因此首页一定要认真考虑性能方面的问题。

### 前端项目目录结构

创建一个静态目录，其中包括一个css文件夹，一个js文件夹。
css文件夹中可以有module文件夹，其中的css文件用于组件，如dialog.js；可以有include文件夹，其中的css用于页面公用部分，如header.css，footer.css等；可以有一个release目录，用于打包之后的文件存放在这里；css文件夹下可以有一个package.json文件来书写打包规则。
script文件夹中可以存放页面的js文件，比如common.js；可以有一个widget目录，其中存放一些组件的js；可以有一个release目录，用于打包之后发布在这里；script文件夹下可以有一个package.json文件来书写打包规则。
图片文件分两种情况，一种是网站上的静态图片，可以在css文件夹下面创建一个img文件夹，用于存放这些静态图片，但是不要存放太多否则会影响性能；另一种是动态读取的图片，通常是放到服务器上的。

### 开发实现流程规范

1. 切图

2. 从页面结构上来考虑，把页面中的公用部分抽象出来

3. 从css文件上来考虑，抽象出一些公用的css，比如reset.css等

4. 可以使用地址来访问css文件

5. 如果前端工程要抽象出模板，那么可以有一套模板对开发者友好，有一套模板对用户友好，对用户友好的模板就可以通过自动化工具打包生成

### 模板

用一个更简洁的形式把页面组装出来展示给用户